A51 MACRO ASSEMBLER  OTA_IAP                                                              07/19/2019 22:46:51 PAGE     1


MACRO ASSEMBLER A51 V8.01
OBJECT MODULE PLACED IN ..\output\OTA_IAP.obj
ASSEMBLER INVOKED BY: E:\developer kit tool\Keil_v5\C51\BIN\A51.EXE ..\code\ASM\OTA_IAP.asm SET(LARGE) DEBUG PRINT(.\OTA
                      _IAP.lst) OBJECT(..\output\OTA_IAP.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     ;------------------------------------------------------------------------------
                       2     ; File name: OTA_IAP.asm
                       3     ; Version: v7
                       4     ;------------------------------------------------------------------------------
                       5     ;#include "OTA_IAP.inc"
  0300          +1     6     INTERRUPT_OFFSET    equ     0x0300
  007B          +1     7     IAP_PROCESS_ADDRESS equ     0x007B
                       8     
                       9     EXTRN CODE (STARTUP1)
                      10     
                      11     ;------------------------------------------------------------------------------
                      12     ; DATA memory
                      13     ;   0x00~0x1F - BANK 0~3
                      14     ;   0x20~0x2F - Bit accessable
                      15     ;   0x30~0x4F - general use direct memory
                      16     ;   0x60~0x7F - stack (48bytes)
                      17     ;------------------------------------------------------------------------------
                      18     
  0030                19         SourceDPH   equ     0x30+0
  0031                20         SourceDPL   equ     0x30+1
  0032                21         SourceBank  equ     0x30+2
  0033                22         TargetDPH   equ     0x30+3
  0034                23         TargetDPL   equ     0x30+4
  0035                24         TargetBank  equ     0x30+5
  0036                25         UpdateDPH   equ     0x30+6
  0037                26         BDCountL    equ     0x30+7     ; Battery Detect Count L
  0038                27         BDCountH    equ     0x30+8     ; Battery Detect Count H
  0039                28         TryCount    equ     0x30+9
  003A                29         ReadData    equ     0x30+10
  0040                30         Buffer      equ     0x30+16
                      31     
                      32     ;------------------------------------------------------------------------------
                      33     ; SST flash control
                      34     
                      35     
                      36     
                      37     
                      38     
                      39     ;------------------------------------------------------------------------------
                      40     ; OTA define
                      41     
                      42     
                      43     
                      44     
                      45     
                      46     
                      47     
                      48     
                      49     ;------------------------------------------------------------------------------
                      50     ; Battery detect define
                      51     
                      52     
  0094                53     sfr CODEBANK    = 0x94;
  00EB                54     sfr TA          = 0xEB;
  009A                55     sfr FLASHCTRL   = 0x9A;
  009B                56     sfr FLASHTMR    = 0x9B;
  00E8                57     sfr EIE         = 0xE8;
A51 MACRO ASSEMBLER  OTA_IAP                                                              07/19/2019 22:46:51 PAGE     2

  0091                58     sfr EIF         = 0x91;
                      59     ;sfr PCON        = 0x87;
  00D1                60     sfr P0OE        = 0xD1;
  00D2                61     sfr P0PUN       = 0xD2;
  00BA                62     sfr RSFLAG      = 0xBA;
  00D8                63     sfr WDCON       = 0xD8;
                      64     
----                  65             CSEG    AT      IAP_PROCESS_ADDRESS
                      66     
007B                  67     OTA_BEGIN:
007B 758160           68             mov     SP, #0x60
007E 759400           69             mov     CODEBANK,#0
0081 75A800           70             mov     IE,#0
                      71             
0084 7400             72             mov     A, #0x00
0086 31D3             73             call    F_FlashControl
                      74             
0088 753789           75             mov     BDCountL, #(27273 mod 256)
008B 75386A           76             mov     BDCountH, #(27273 /   256)
008E                  77     _OTA_BatteryDetect:
008E 31EA             78             call    F_BatteryDetect                 ; run bettery detect (PASS: return A=1, NOT
                              PASS: return A=0)
0090 6020             79             jz      _OTA_PROCESS_Reset              ; if A==0, jump to 0x0000 (reset MCU)
0092 D537F9           80             djnz    BDCountL, _OTA_BatteryDetect
0095 E538             81             mov     a, BDCountH
0097 6005             82             jz      _OTA_START
0099 D538F2           83             djnz    BDCountH, _OTA_BatteryDetect     ; if bettery detect pass with BDCount time
                             s, OTA START
009C 80F0             84             jmp     _OTA_BatteryDetect
                      85     
009E                  86     _OTA_START:
009E 90FFFE           87             mov     DPTR, #0xFFFE
00A1                  88         _OTA_PROCESS_CHECK_CODE_L:
00A1 E4               89             clr     a
00A2 93               90             movc    a, @a+DPTR
00A3 B4FF08           91             cjne    a, #0xFF, _OTA_PROCESS_END
                      92     
00A6                  93         _OTA_PROCESS_CHECK_CODE_H:
00A6 7401             94             mov     a, #1
00A8 93               95             movc    a, @a+DPTR
00A9 B4FF02           96             cjne    A, #0xFF, _OTA_PROCESS_END
00AC 8006             97             jmp     _OTA_PROCESS
                      98     
00AE                  99     _OTA_PROCESS_END:
00AE 31E3            100             call    F_ClrPWE
00B0 6100            101             jmp     OTA_END
                     102     
00B2                 103     _OTA_PROCESS_Reset:
00B2                 104     _OTA_PROCESS_FINISH:
00B2 0100            105             jmp     0x0000  ; reset
                     106     
00B4                 107     _OTA_PROCESS:
00B4 31C9            108             call    F_FlashSetting
00B6 753603          109             mov     UpdateDPH, #(INTERRUPT_OFFSET>>8)
                     110     
00B9                 111         _OTA_PROCESS_Loop:
00B9 75390A          112             mov     TryCount, #10
00BC                 113         _OTA_PROCESS_Loop_ReTry:
00BC D53902          114             djnz    TryCount, _OTA_PROCESS_Erase
00BF 8041            115             jmp     _OTA_PROCESS_FAIL
                     116         
00C1                 117         _OTA_PROCESS_Erase:
00C1 853683          118             mov     DPH, UpdateDPH
00C4 758200          119             mov     DPL, #0x00
00C7 31DC            120             call    F_SetPWE
00C9 31AA            121             call    F_EraseSector
A51 MACRO ASSEMBLER  OTA_IAP                                                              07/19/2019 22:46:51 PAGE     3

                     122     
                     123             ; if (UpdateDPH >= 0x80)
                     124             ;   { SourceBank=2; SourceDPH=UpdateDPH;      TargetBank=0; TargetDPH=UpdateDPH; }
                     125             ; else
                     126             ;   { SourceBank=1; SourceDPH=UpdateDPH+0x80; TargetBank=0; TargetDPH=UpdateDPH; }
00CB E536            127             mov     a, UpdateDPH
00CD C3              128             clr     C
00CE 9480            129             subb    a, #0x80
00D0 400E            130             jc      _OTA_PROCESS_UPDATE_0000_7F00
                     131     
00D2                 132         _OTA_PROCESS_UPDATE_8000_FF00:
00D2 753202          133             mov     SourceBank, #2
00D5 853630          134             mov     SourceDPH, UpdateDPH
00D8 753500          135             mov     TargetBank, #0
00DB 853633          136             mov     TargetDPH, UpdateDPH
00DE 800F            137             jmp     _OTA_PROCESS_UPDATE
                     138     
00E0                 139         _OTA_PROCESS_UPDATE_0000_7F00:
00E0 753201          140             mov     SourceBank, #1
00E3 7480            141             mov     a, #0x80
00E5 2536            142             add     a, UpdateDPH
00E7 F530            143             mov     SourceDPH, a
00E9 753500          144             mov     TargetBank, #0
00EC 853633          145             mov     TargetDPH, UpdateDPH
                     146     
00EF                 147         _OTA_PROCESS_UPDATE:
00EF 3125            148             call    F_Update256Bytes
00F1 70C9            149             jnz     _OTA_PROCESS_Loop_ReTry
                     150     
00F3 E536            151             mov     a, UpdateDPH
00F5 B4FF06          152             cjne    a, #0xFF, _OTA_PROCESS_NEXT
00F8 7400            153             mov     A, #0x00
00FA 31D3            154             call    F_FlashControl                  
00FC 80B4            155             jmp     _OTA_PROCESS_FINISH
                     156     
00FE                 157         _OTA_PROCESS_NEXT:
00FE 0536            158             inc     UpdateDPH
0100 80B7            159             jmp     _OTA_PROCESS_Loop
                     160             
0102                 161         _OTA_PROCESS_FAIL:
0102 8640            162             mov     Buffer+0, @R0
0104 8841            163             mov     Buffer+1, R0
0106 858342          164             mov     Buffer+2, DPH
0109 858243          165             mov     Buffer+3, DPL
010C 7400            166             mov     a, #0
010E 93              167             movc    a, @a+DPTR
010F F544            168             mov     Buffer+4, a
0111 754500          169             mov     Buffer+5, #0x00
0114 7546EE          170             mov     Buffer+6, #0xEE
0117 754711          171             mov     Buffer+7, #0x11
011A 90FFF8          172             mov     DPTR, #0xFFF8
011D 7408            173             mov     a, #8
011F 31DC            174             call    F_SetPWE
0121 317A            175             call    F_Write_A_Bytes
0123 80FE            176             jmp     $
                     177     
                     178     ;------------------------------------------------------------------------------
                     179     ; Function: Update 256bytes SourceBank:SourceDPH:00 -> TargetBank:TargetDPH:00
                     180     ;   R6: count
                     181     ;   R5: DPL
                     182     ;------------------------------------------------------------------------------
0125                 183     F_Update256Bytes:
0125 7D00            184             mov     R5, #0x00
0127 7E10            185             mov     R6, #(256/16)
                     186     
0129                 187         _F_Update256Bytes_Loop:
A51 MACRO ASSEMBLER  OTA_IAP                                                              07/19/2019 22:46:51 PAGE     4

0129 853083          188             mov     DPH, SourceDPH
012C 8D82            189             mov     DPL, R5
012E 853294          190             mov     CODEBANK, SourceBank
0131 3157            191             call    F_Read16Bytes
                     192     
0133 853383          193             mov     DPH, TargetDPH
0136 8D82            194             mov     DPL, R5
0138 853594          195             mov     CODEBANK, TargetBank
013B 31DC            196             call    F_SetPWE
013D 317D            197             call    F_Write16Bytes
                     198             
013F 853383          199             mov     DPH, TargetDPH
0142 8D82            200             mov     DPL, R5
0144 853594          201             mov     CODEBANK, TargetBank
0147 3164            202             call    F_Verify16Bytes
0149 7009            203             jnz     _F_Update256Bytes_FAIL
                     204     
014B ED              205             mov     a, R5
014C 2410            206             add     a, #16
014E FD              207             mov     R5, a
                     208     
014F DED8            209             djnz    R6, _F_Update256Bytes_Loop
0151                 210         _F_Update256Bytes_PASS:
0151 7400            211             mov     a, #0x00
0153 22              212             ret
0154                 213         _F_Update256Bytes_FAIL:        
0154 74FF            214             mov     a, #0xFF
0156 22              215             ret
                     216     
                     217     ;------------------------------------------------------------------------------
                     218     ; Function: Read flash @DPTR 16bytes -> Buffer
                     219     ;   R7: read count
                     220     ;------------------------------------------------------------------------------
0157                 221     F_Read16Bytes:
0157 7840            222             mov     R0, #Buffer
0159 7F10            223             mov     R7, #16
015B                 224         _F_Read16Bytes_Loop:
015B 7400            225             mov     a, #0
015D 93              226             movc    a, @a+DPTR
015E F6              227             mov     @R0, a
015F A3              228             inc     DPTR
0160 08              229             inc     R0
0161 DFF8            230             djnz    R7, _F_Read16Bytes_Loop
0163 22              231             ret
                     232             
                     233     ;------------------------------------------------------------------------------
                     234     ; Function: Verify flash Buffer<->@DPTR 16bytes
                     235     ;   R7: read count
                     236     ;------------------------------------------------------------------------------
0164                 237     F_Verify16Bytes:
0164 7840            238             mov     R0, #Buffer
0166 7F10            239             mov     R7, #16
0168                 240         _F_Verify16Bytes_Loop:
0168 863A            241             mov     ReadData, @R0
016A 7400            242             mov     a, #0
016C 93              243             movc    a, @a+DPTR
016D B53A07          244             cjne    a, ReadData, _F_Verify16Bytes_FAIL
0170 A3              245             inc     DPTR
0171 08              246             inc     R0
0172 DFF4            247             djnz    R7, _F_Verify16Bytes_Loop
0174                 248         _F_Verify16Bytes_PASS:
0174 7400            249             mov     a, #0x00
0176 22              250             ret
0177                 251         _F_Verify16Bytes_FAIL:
0177 74FF            252             mov     a, #0xFF
0179 22              253             ret
A51 MACRO ASSEMBLER  OTA_IAP                                                              07/19/2019 22:46:51 PAGE     5

                     254     
                     255     ;------------------------------------------------------------------------------
                     256     ; Function: Write ACC bytes Buffer -> @DPTR
                     257     ;   R7: program count
                     258     ;------------------------------------------------------------------------------
017A                 259     F_Write_A_Bytes:
017A FF              260             mov     R7, a
017B 801B            261             jmp     _F_Write_A_Bytes_Start
                     262     
                     263     ;------------------------------------------------------------------------------
                     264     ; Function: Write 16 bytes Buffer -> @DPTR
                     265     ;   R7: program count
                     266     ;------------------------------------------------------------------------------
017D                 267     F_Write16Bytes:
017D 7401            268             mov     A, #0x01
017F 31D3            269             call    F_FlashControl
                     270     
0181 E583            271             mov     a, DPH                  ;
0183 C3              272             clr     C                       ;
0184 9403            273             subb    a, #(INTERRUPT_OFFSET>>8)       ;
0186 401F            274             jc      _F_Write16Bytes_end     ; if (DPH<OTA_START_DPH) exit
                     275     
0188 E5BA            276             mov     a,RSFLAG
018A 5407            277             anl     a,#0x07
018C 6002            278             jz      _CHECK_WDT2_
018E 01AE            279             jmp     _OTA_PROCESS_END
                     280     
0190                 281         _CHECK_WDT2_:
0190 E5D8            282             mov     a,WDCON
0192 5404            283             anl     a,#0x04
0194 7002            284             jnz     _F_Write_START
0196 01AE            285             jmp     _OTA_PROCESS_END
                     286     
0198                 287         _F_Write_A_Bytes_Start:
0198                 288         _F_Write_START:               
0198 7F10            289             mov     R7, #16
019A 7840            290             mov     R0, #Buffer
019C                 291         _F_Write16Bytes_Loop:
019C E6              292             mov     a, @R0
019D B4FF02          293             cjne    a, #0xFF, _F_Write16Bytes_Write
01A0 8001            294             jmp     _F_Write16Bytes_Next
01A2                 295         _F_Write16Bytes_Write:
01A2 F0              296             movx    @dptr,a
01A3                 297         _F_Write16Bytes_Next:
01A3 A3              298             inc     dptr
01A4 08              299             inc     R0
01A5 DFF5            300             djnz    R7, _F_Write16Bytes_Loop
                     301     
01A7                 302         _F_Write16Bytes_end:
01A7 31E3            303             call    F_ClrPWE
                     304     
01A9 22              305             ret
                     306     
                     307     ;------------------------------------------------------------------------------
                     308     ; Function: Erase Sector @DPTR
                     309     ;------------------------------------------------------------------------------
01AA                 310     F_EraseSector:
01AA 7404            311             mov     A, #0x04
01AC 31D3            312             call    F_FlashControl
                     313     
01AE E583            314             mov     a, DPH              ;
01B0 C3              315             clr     C                   ;
01B1 9403            316             subb    a, #(INTERRUPT_OFFSET>>8)   ;
01B3 4011            317             jc      _F_EraseSector_end  ; if (DPH<OTA_START_DPH) exit
                     318             
01B5 E5BA            319             mov     a,RSFLAG
A51 MACRO ASSEMBLER  OTA_IAP                                                              07/19/2019 22:46:51 PAGE     6

01B7 5407            320             anl     a,#0x07
01B9 6002            321             jz      _CHECK_WDT_
01BB 01AE            322             jmp     _OTA_PROCESS_END
                     323     
01BD                 324         _CHECK_WDT_:
01BD E5D8            325             mov     a,WDCON
01BF 5404            326             anl     a,#0x04
01C1 7002            327             jnz     _EraseSector_START
01C3 01AE            328             jmp     _OTA_PROCESS_END
                     329     
01C5                 330         _EraseSector_START:                
01C5 F0              331             movx    @dptr,a
01C6                 332         _F_EraseSector_end:
01C6 31E3            333             call    F_ClrPWE
                     334     
01C8 22              335             ret
                     336     
                     337     ;------------------------------------------------------------------------------
                     338     ; Function: Flash setting
                     339     ;------------------------------------------------------------------------------
01C9                 340     F_FlashSetting:
01C9 75EBAA          341             mov     ta, #0xaa
01CC 75EB55          342             mov     ta, #0x55
01CF 759B10          343             mov     flashtmr, #16
01D2 22              344             ret
                     345     
                     346     ;------------------------------------------------------------------------------
                     347     ; Function: write A to Flash control SFR
                     348     ;------------------------------------------------------------------------------
01D3                 349     F_FlashControl:
01D3 75EBAA          350             mov     ta, #0xaa
01D6 75EB55          351             mov     ta, #0x55
01D9 F59A            352             mov     flashctrl, a
01DB 22              353             ret
                     354     
                     355     ;------------------------------------------------------------------------------
                     356     ; Function: PWE = 1
                     357     ;------------------------------------------------------------------------------
01DC                 358     F_SetPWE:
01DC E587            359             mov     a,pcon
01DE D2E4            360             setb    acc.4
01E0 F587            361             mov     pcon,a
01E2 22              362             ret
                     363     
                     364     ;------------------------------------------------------------------------------
                     365     ; Function: PWE = 0
                     366     ;------------------------------------------------------------------------------
01E3                 367     F_ClrPWE:
01E3 E587            368             mov     a,pcon
01E5 C2E4            369             clr     acc.4
01E7 F587            370             mov     pcon,a
01E9 22              371             ret
                     372             
                     373     ;------------------------------------------------------------------------------
                     374     ; Function: Battery Detect (wait, until REGI high then 2.5V)
                     375     ; 0x202B:
                     376     ;   BIT7  BIT6  BIT5  BIT4  BIT3  BIT2  BIT1  BIT0
                     377     ;   RGS   RGV1  RGV0  BDF   BVT2  BVT1  BVT0  BDS
                     378     ; BVT[2:0] = 001 for 2.1V
                     379     ; BVT[2:0] = 101 for 2.5V
                     380     ; BVT[2:0] = 110 for 2.6V
                     381     ;------------------------------------------------------------------------------
01EA                 382     F_BatteryDetect:
01EA 902038          383             mov     DPTR, #0x2038 ; RFT Test Register IV
01ED 7490            384             mov     a, #0x90      ; DSB=1, FBG=16
01EF F0              385             movx    @DPTR, a
A51 MACRO ASSEMBLER  OTA_IAP                                                              07/19/2019 22:46:51 PAGE     7

01F0 90202B          386             mov     DPTR, #0x202B ; Battery detect Register
01F3 7425            387             mov     a, #0x25      ; RGS=0b(VDDS=1.8V), RGV=01b(VDD_D,VDD_A=2.0V), BVT=001b(2.1V
                             ), BDS=1
01F5 F0              388             movx    @DPTR, a
01F6                 389         _F_BatteryDetectLoop:
01F6 E0              390             movx    a, @DPTR
01F7 20E0FC          391             jb      acc.0, _F_BatteryDetectLoop
01FA 20E405          392             jb      acc.4, _F_BatteryDetect_BDF_1
01FD                 393         _F_BatteryDetect_BDF_0:       
01FD 5107            394             call    F_short_delay
01FF 7400            395             mov     a, #0
0201 22              396             ret
                     397                     
0202                 398         _F_BatteryDetect_BDF_1:
0202 5107            399             call    F_short_delay
0204 7401            400             mov     a, #1
0206 22              401             ret
                     402     
0207                 403     F_short_delay:
0207 7C19            404             mov     R4, #25
0209                 405         _F_short_delay_loop:
0209 DCFE            406             djnz    R4, _F_short_delay_loop
020B 22              407             ret
                     408     
                     409     ;------------------------------------------------------------------------------
                     410     ; OTA END
                     411     ;------------------------------------------------------------------------------
----                 412                     CSEG    at       INTERRUPT_OFFSET
0300                 413     OTA_END:
0300 020000   F      414             LJMP    STARTUP1
                     415     
                     416             end
A51 MACRO ASSEMBLER  OTA_IAP                                                              07/19/2019 22:46:51 PAGE     8

SYMBOL TABLE LISTING
------ ----- -------


N A M E                        T Y P E  V A L U E   ATTRIBUTES

ACC . . . . . . . . . . . . .  D ADDR   00E0H   A   
BDCOUNTH. . . . . . . . . . .  N NUMB   0038H   A   
BDCOUNTL. . . . . . . . . . .  N NUMB   0037H   A   
BUFFER. . . . . . . . . . . .  N NUMB   0040H   A   
CODEBANK. . . . . . . . . . .  D ADDR   0094H   A   
DPH . . . . . . . . . . . . .  D ADDR   0083H   A   
DPL . . . . . . . . . . . . .  D ADDR   0082H   A   
EIE . . . . . . . . . . . . .  D ADDR   00E8H   A   
EIF . . . . . . . . . . . . .  D ADDR   0091H   A   
FLASHCTRL . . . . . . . . . .  D ADDR   009AH   A   
FLASHTMR. . . . . . . . . . .  D ADDR   009BH   A   
F_BATTERYDETECT . . . . . . .  C ADDR   01EAH   A   
F_CLRPWE. . . . . . . . . . .  C ADDR   01E3H   A   
F_ERASESECTOR . . . . . . . .  C ADDR   01AAH   A   
F_FLASHCONTROL. . . . . . . .  C ADDR   01D3H   A   
F_FLASHSETTING. . . . . . . .  C ADDR   01C9H   A   
F_READ16BYTES . . . . . . . .  C ADDR   0157H   A   
F_SETPWE. . . . . . . . . . .  C ADDR   01DCH   A   
F_SHORT_DELAY . . . . . . . .  C ADDR   0207H   A   
F_UPDATE256BYTES. . . . . . .  C ADDR   0125H   A   
F_VERIFY16BYTES . . . . . . .  C ADDR   0164H   A   
F_WRITE16BYTES. . . . . . . .  C ADDR   017DH   A   
F_WRITE_A_BYTES . . . . . . .  C ADDR   017AH   A   
IAP_PROCESS_ADDRESS . . . . .  N NUMB   007BH   A   
IE. . . . . . . . . . . . . .  D ADDR   00A8H   A   
INTERRUPT_OFFSET. . . . . . .  N NUMB   0300H   A   
OTA_BEGIN . . . . . . . . . .  C ADDR   007BH   A   
OTA_END . . . . . . . . . . .  C ADDR   0300H   A   
P0OE. . . . . . . . . . . . .  D ADDR   00D1H   A   
P0PUN . . . . . . . . . . . .  D ADDR   00D2H   A   
PCON. . . . . . . . . . . . .  D ADDR   0087H   A   
READDATA. . . . . . . . . . .  N NUMB   003AH   A   
RSFLAG. . . . . . . . . . . .  D ADDR   00BAH   A   
SOURCEBANK. . . . . . . . . .  N NUMB   0032H   A   
SOURCEDPH . . . . . . . . . .  N NUMB   0030H   A   
SOURCEDPL . . . . . . . . . .  N NUMB   0031H   A   
SP. . . . . . . . . . . . . .  D ADDR   0081H   A   
STARTUP1. . . . . . . . . . .  C ADDR   -----       EXT
TA. . . . . . . . . . . . . .  D ADDR   00EBH   A   
TARGETBANK. . . . . . . . . .  N NUMB   0035H   A   
TARGETDPH . . . . . . . . . .  N NUMB   0033H   A   
TARGETDPL . . . . . . . . . .  N NUMB   0034H   A   
TRYCOUNT. . . . . . . . . . .  N NUMB   0039H   A   
UPDATEDPH . . . . . . . . . .  N NUMB   0036H   A   
WDCON . . . . . . . . . . . .  D ADDR   00D8H   A   
_CHECK_WDT2_. . . . . . . . .  C ADDR   0190H   A   
_CHECK_WDT_ . . . . . . . . .  C ADDR   01BDH   A   
_ERASESECTOR_START. . . . . .  C ADDR   01C5H   A   
_F_BATTERYDETECTLOOP. . . . .  C ADDR   01F6H   A   
_F_BATTERYDETECT_BDF_0. . . .  C ADDR   01FDH   A   
_F_BATTERYDETECT_BDF_1. . . .  C ADDR   0202H   A   
_F_ERASESECTOR_END. . . . . .  C ADDR   01C6H   A   
_F_READ16BYTES_LOOP . . . . .  C ADDR   015BH   A   
_F_SHORT_DELAY_LOOP . . . . .  C ADDR   0209H   A   
_F_UPDATE256BYTES_FAIL. . . .  C ADDR   0154H   A   
_F_UPDATE256BYTES_LOOP. . . .  C ADDR   0129H   A   
_F_UPDATE256BYTES_PASS. . . .  C ADDR   0151H   A   
_F_VERIFY16BYTES_FAIL . . . .  C ADDR   0177H   A   
_F_VERIFY16BYTES_LOOP . . . .  C ADDR   0168H   A   
_F_VERIFY16BYTES_PASS . . . .  C ADDR   0174H   A   
A51 MACRO ASSEMBLER  OTA_IAP                                                              07/19/2019 22:46:51 PAGE     9

_F_WRITE16BYTES_END . . . . .  C ADDR   01A7H   A   
_F_WRITE16BYTES_LOOP. . . . .  C ADDR   019CH   A   
_F_WRITE16BYTES_NEXT. . . . .  C ADDR   01A3H   A   
_F_WRITE16BYTES_WRITE . . . .  C ADDR   01A2H   A   
_F_WRITE_A_BYTES_START. . . .  C ADDR   0198H   A   
_F_WRITE_START. . . . . . . .  C ADDR   0198H   A   
_OTA_BATTERYDETECT. . . . . .  C ADDR   008EH   A   
_OTA_PROCESS. . . . . . . . .  C ADDR   00B4H   A   
_OTA_PROCESS_CHECK_CODE_H . .  C ADDR   00A6H   A   
_OTA_PROCESS_CHECK_CODE_L . .  C ADDR   00A1H   A   
_OTA_PROCESS_END. . . . . . .  C ADDR   00AEH   A   
_OTA_PROCESS_ERASE. . . . . .  C ADDR   00C1H   A   
_OTA_PROCESS_FAIL . . . . . .  C ADDR   0102H   A   
_OTA_PROCESS_FINISH . . . . .  C ADDR   00B2H   A   
_OTA_PROCESS_LOOP . . . . . .  C ADDR   00B9H   A   
_OTA_PROCESS_LOOP_RETRY . . .  C ADDR   00BCH   A   
_OTA_PROCESS_NEXT . . . . . .  C ADDR   00FEH   A   
_OTA_PROCESS_RESET. . . . . .  C ADDR   00B2H   A   
_OTA_PROCESS_UPDATE . . . . .  C ADDR   00EFH   A   
_OTA_PROCESS_UPDATE_0000_7F00  C ADDR   00E0H   A   
_OTA_PROCESS_UPDATE_8000_FF00  C ADDR   00D2H   A   
_OTA_START. . . . . . . . . .  C ADDR   009EH   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
